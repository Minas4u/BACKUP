@import url('material-you-colors.css');

:root {
    /* M3 Light Theme Base */
    --body-bg: var(--m3-background-light);
    --text-color: var(--m3-on-background-light);
    --main-container-bg: var(--m3-surface-1-light); /* Elevated surface */
    /* M3 Shadow (conceptual, real M3 uses layered shadows and tints) */
    --main-container-shadow: 0px 1px 2px 0px rgba(0,0,0,0.3), 0px 1px 3px 1px rgba(0,0,0,0.15); /* M3 Elevation 1-ish */

    /* General Interactive Elements */
    --nav-button-hover-bg: var(--m3-surface-2-light); /* Slightly more elevated */
    --nav-button-hover-text: var(--m3-on-surface-light);

    /* Active Nav Buttons - Primary, Secondary, Tertiary mapping */
    --nav-button-active-overview-bg: var(--m3-primary-light);
    --nav-button-active-overview-text: var(--m3-on-primary-light);
    --nav-button-active-overview-hover-bg: color-mix(in srgb, var(--m3-primary-light) 90%, black);
    --nav-button-active-plan-bg: var(--m3-secondary-light);
    --nav-button-active-plan-text: var(--m3-on-secondary-light);
    --nav-button-active-plan-hover-bg: color-mix(in srgb, var(--m3-secondary-light) 90%, black);
    --nav-button-active-calendar-bg: var(--m3-tertiary-light);
    --nav-button-active-calendar-text: var(--m3-on-tertiary-light);
    --nav-button-active-calendar-hover-bg: color-mix(in srgb, var(--m3-tertiary-light) 90%, black);
    /* Assuming these follow a similar pattern, map to Primary/Secondary/Tertiary variants or containers */
    --nav-button-active-race-bg: var(--m3-primary-container-light);
    --nav-button-active-race-text: var(--m3-on-primary-container-light);
    --nav-button-active-race-hover-bg: color-mix(in srgb, var(--m3-primary-container-light) 90%, black);
    --nav-button-active-info-bg: var(--m3-secondary-container-light);
    --nav-button-active-info-text: var(--m3-on-secondary-container-light);
    --nav-button-active-info-hover-bg: color-mix(in srgb, var(--m3-secondary-container-light) 90%, black);
    --nav-button-active-companion-bg: var(--m3-tertiary-container-light);
    --nav-button-active-companion-text: var(--m3-on-tertiary-container-light);
    --nav-button-active-companion-hover-bg: color-mix(in srgb, var(--m3-tertiary-container-light) 90%, black);

    /* Phase Buttons - Outlined button style or tonal button style */
    --phase-button-preseason-border: var(--m3-outline-light);
    --phase-button-preseason-text: var(--m3-on-surface-variant-light);
    --phase-button-preseason-hover-bg: var(--m3-surface-variant-light); /* Or a very light primary/secondary tint */
    --phase-button-preseason-active-bg: var(--m3-secondary-container-light);
    --phase-button-preseason-active-text: var(--m3-on-secondary-container-light);
    --phase-button-preseason-active-border: var(--m3-secondary-container-light);

    --phase-button-base-border: var(--m3-primary-light);
    --phase-button-base-text: var(--m3-primary-light);
    --phase-button-base-hover-bg: var(--m3-primary-container-light);
    --phase-button-base-active-bg: var(--m3-primary-light);
    --phase-button-base-active-text: var(--m3-on-primary-light);

    --phase-button-specific-border: var(--m3-tertiary-light);
    --phase-button-specific-text: var(--m3-tertiary-light);
    --phase-button-specific-hover-bg: var(--m3-tertiary-container-light);
    --phase-button-specific-active-bg: var(--m3-tertiary-light);
    --phase-button-specific-active-text: var(--m3-on-tertiary-light);
    --phase-button-specific-active-border: var(--m3-tertiary-light);

    --phase-button-taper-border: var(--m3-error-light); /* Using error for distinct 'warning' like taper */
    --phase-button-taper-text: var(--m3-error-light);
    --phase-button-taper-hover-bg: var(--m3-error-container-light);
    --phase-button-taper-active-bg: var(--m3-error-light);
    --phase-button-taper-active-text: var(--m3-on-error-light);
    --phase-button-taper-active-border: var(--m3-error-light);

    /* Week Buttons - Similar to phase buttons, using outlines or tonal */
    --week-button-border: var(--m3-outline-light);
    --week-button-active-bg: var(--m3-primary-light);
    --week-button-active-text: var(--m3-on-primary-light);
    --week-button-active-border: var(--m3-primary-light);

    --week-button-preseason-text: var(--m3-on-surface-variant-light);
    --week-button-preseason-hover-bg: var(--m3-surface-variant-light);
    --week-button-preseason-hover-border: var(--m3-outline-variant-light);
    --week-button-base-text: var(--m3-primary-light);
    --week-button-base-hover-bg: var(--m3-primary-container-light);
    --week-button-base-hover-border: var(--m3-primary-container-light);
    --week-button-specific-text: var(--m3-tertiary-light);
    --week-button-specific-hover-bg: var(--m3-tertiary-container-light);
    --week-button-specific-hover-border: var(--m3-tertiary-container-light);
    --week-button-taper-text: var(--m3-error-light);
    --week-button-taper-hover-bg: var(--m3-error-container-light);
    --week-button-taper-hover-border: var(--m3-error-container-light);

    /* Content Cards */
    --content-card-bg: var(--m3-surface-1-light); /* Slightly elevated from main background */
    /* Card borders can use primary/secondary/tertiary or just outline */
    --overview-section-card-border-l: var(--m3-primary-light);
    --overview-section-card-border-b: var(--m3-secondary-light);
    --news-section-card-border-l: var(--m3-tertiary-light);
    --news-section-card-border-b: var(--m3-primary-container-light);
    --race-section-card-border-l: var(--m3-secondary-container-light);
    --race-section-card-border-b: var(--m3-tertiary-container-light);

    /* Tables */
    --table-border: var(--m3-outline-light);
    --table-th-bg: var(--m3-surface-2-light); /* Slightly different from card bg */
    --schedule-table-border: var(--m3-outline-variant-light);
    --schedule-table-th-bg: var(--m3-surface-bright-light); /* Brighter for header */
    --schedule-table-th-text: var(--m3-on-surface-light);

    /* Inputs and Labels */
    --input-userid-border: var(--m3-primary-light);
    --input-userid-focus-border: var(--m3-primary-light); /* Focus can be handled by box-shadow in M3 style */
    --input-userid-focus-shadow: 0 0 0 2px var(--m3-primary-container-light); /* M3 like focus ring */
    --label-userid-border-l: var(--m3-primary-light);
    --input-focus-border: var(--m3-primary-light);
    --input-focus-shadow: 0 0 0 2px var(--m3-primary-container-light); /* M3 like focus ring */

    /* Logo - Keep brand colors or adapt to M3. For now, map to M3 accents */
    --logo-d-text: var(--m3-primary-light);
    --logo-n-gradient-start: var(--m3-primary-light);
    --logo-n-gradient-end: var(--m3-secondary-light);
    --logo-a-text: var(--m3-secondary-light);
    --logo-border-top: var(--m3-secondary-light);
    --logo-border-right: var(--m3-primary-light);
    --logo-border-bottom: var(--m3-primary-light);
    --logo-border-left: var(--m3-secondary-light);

    /* Scrollbar */
    --scrollbar-track-bg: var(--m3-surface-variant-light);
    --scrollbar-thumb-bg: var(--m3-outline-light);
    --scrollbar-thumb-hover-bg: var(--m3-on-surface-variant-light);

    /* Messages */
    --loading-message-text: var(--m3-primary-light);
    --error-message-text: var(--m3-on-error-container-light);
    --error-message-bg: var(--m3-error-container-light);
    --error-message-border: var(--m3-error-light);

    /* PWA Install Button - Filled button style */
    --install-pwa-button-bg: var(--m3-primary-light);
    --install-pwa-button-text: var(--m3-on-primary-light);
    --install-pwa-button-border: var(--m3-primary-light); /* Or outline */
    --install-pwa-button-hover-bg: color-mix(in srgb, var(--m3-primary-light) 90%, black);
    --install-pwa-button-hover-border: color-mix(in srgb, var(--m3-primary-light) 90%, black);

    /* Calendar */
    --calendar-grid-bg: var(--m3-surface-variant-light);
    --calendar-grid-border: var(--m3-outline-variant-light);
    --calendar-header-bg: var(--m3-secondary-container-light);
    --calendar-header-text: var(--m3-on-secondary-container-light);
    --calendar-header-border: var(--m3-outline-variant-light);
    --calendar-day-bg: var(--m3-surface-light);
    --calendar-day-border: var(--m3-outline-variant-light);
    --calendar-day-hover-bg: var(--m3-surface-2-light);
    --calendar-day-other-month-bg: var(--m3-surface-bright-light); /* Slightly different from day bg */
    --calendar-day-other-month-text: var(--m3-on-surface-variant-light);
    --calendar-day-today-bg: var(--m3-primary-container-light);
    --calendar-day-today-border: var(--m3-primary-light);

    /* Activity Thumbnails - Use tonal containers */
    --activity-thumb-easy-bg: var(--m3-primary-container-light); --activity-thumb-easy-text: var(--m3-on-primary-container-light);
    --activity-thumb-easy-green-bg: var(--m3-tertiary-container-light); --activity-thumb-easy-green-text: var(--m3-on-tertiary-container-light); /* Example map */
    --activity-thumb-fartlek-bg: var(--m3-error-container-light); --activity-thumb-fartlek-text: var(--m3-on-error-container-light);
    --activity-thumb-tempo-bg: var(--m3-secondary-container-light); --activity-thumb-tempo-text: var(--m3-on-secondary-container-light);
    --activity-thumb-interval-bg: color-mix(in srgb, var(--m3-error-light) 30%, var(--m3-surface-light)); --activity-thumb-interval-text: var(--m3-error-light);
    --activity-thumb-long-bg: var(--m3-primary-container-light); --activity-thumb-long-text: var(--m3-on-primary-container-light); /* Different shade? */
    --activity-thumb-race-bg: var(--m3-tertiary-container-light); --activity-thumb-race-text: var(--m3-on-tertiary-container-light);
    --activity-thumb-rest-bg: var(--m3-surface-variant-light); --activity-thumb-rest-text: var(--m3-on-surface-variant-light);
    --activity-thumb-default-bg: var(--m3-surface-2-light); --activity-thumb-default-text: var(--m3-on-surface-light);

    /* Custom Rect Borders - map to primary/secondary */
    --custom-rect-nav-border-t: var(--m3-secondary-light);
    --custom-rect-nav-border-r: var(--m3-primary-light);
    --custom-rect-nav-border-b: var(--m3-primary-light);
    --custom-rect-nav-border-l: var(--m3-secondary-light);

    --custom-rect-today-border-t: var(--m3-secondary-light);
    --custom-rect-today-border-r: var(--m3-primary-light);
    --custom-rect-today-border-b: var(--m3-primary-light);
    --custom-rect-today-border-l: var(--m3-secondary-light);

    --custom-rect-this-week-border-t: var(--m3-tertiary-light);
    --custom-rect-this-week-border-l: var(--m3-tertiary-light);
    --custom-rect-this-week-border-b: var(--m3-error-light);
    --custom-rect-this-week-border-r: var(--m3-error-light);

    /* Titles */
    --title-project-text: var(--m3-secondary-light);
    --title-marathon-text: var(--m3-primary-light);

    /* Loader */
    --loader-border: var(--m3-surface-variant-light); /* inactive part of spinner */
    --loader-border-top: var(--m3-primary-light); /* active part */
    /* PDF Button - Filled button style */
    --pdf-button-bg: var(--m3-secondary-light);
    --pdf-button-text: var(--m3-on-secondary-light);
    --pdf-button-hover-bg: color-mix(in srgb, var(--m3-secondary-light) 90%, black);
    /* Calendar Nav Button - Tonal or Filled */
    --calendar-nav-button-bg: var(--m3-primary-container-light);
    --calendar-nav-button-text: var(--m3-on-primary-container-light);
    --calendar-nav-button-hover-bg: color-mix(in srgb, var(--m3-primary-container-light) 90%, var(--m3-on-primary-container-light));

    /* Toggle Button - Outlined or Tonal */
    --toggle-button-bg: var(--m3-secondary-container-light);
    --toggle-button-text: var(--m3-on-secondary-container-light);
    --toggle-button-border: var(--m3-secondary-light);
    --toggle-button-hover-bg: color-mix(in srgb, var(--m3-secondary-container-light) 90%, var(--m3-on-secondary-container-light));
    --toggle-button-hover-border: color-mix(in srgb, var(--m3-secondary-light) 90%, black);

    /* Activity Text (These are specific semantic colors, try to map to M3 roles or keep distinct if necessary) */
    --activity-text-easy: var(--m3-primary-light);
    --activity-text-recovery: var(--m3-secondary-light);
    --activity-text-base: var(--m3-tertiary-light);
    --activity-text-tempo: color-mix(in srgb, var(--m3-secondary-light) 70%, orange);
    --activity-text-interval: var(--m3-error-light);
    --activity-text-fartlek: color-mix(in srgb, var(--m3-error-light) 70%, purple);
    --activity-text-str-hills: color-mix(in srgb, var(--m3-neutral-light) 70%, brown);
    --activity-text-rest: var(--m3-on-surface-variant-light);
    --activity-text-zone-race: var(--m3-primary-container-light); /* Or a strong accent */
    --activity-text-double: color-mix(in srgb, var(--m3-secondary-light) 70%, brown);
    --activity-text-mobility: color-mix(in srgb, var(--m3-neutral-light) 70%, teal);

    --highlight-zone-pace-bg: var(--m3-primary-container-light);
    --highlight-zone-pace-text: var(--m3-on-primary-container-light);

    /* Companion App Nav Buttons */
    --companion-nav-button-hover-bg: var(--m3-surface-2-light);
    --companion-nav-button-hover-text: var(--m3-on-surface-light);
    --companion-nav-button-active-drills-bg: var(--m3-tertiary-container-light);
    --companion-nav-button-active-drills-text: var(--m3-on-tertiary-container-light);
    --companion-nav-button-active-mobility-bg: var(--m3-primary-container-light);
    --companion-nav-button-active-mobility-text: var(--m3-on-primary-container-light);
    --companion-nav-button-active-strength-bg: var(--m3-secondary-container-light);
    --companion-nav-button-active-strength-text: var(--m3-on-secondary-container-light);

    /* Exercise Card */
    --exercise-card-bg: var(--m3-surface-2-light); /* Slightly more elevated */
    --exercise-card-shadow: 0px 1px 2px 0px rgba(0,0,0,0.3), 0px 2px 6px 2px rgba(0,0,0,0.15); /* M3 Elevation 2-ish */
    --exercise-card-hover-shadow: 0px 1px 2px 0px rgba(0,0,0,0.3), 0px 4px 8px 3px rgba(0,0,0,0.15); /* M3 Elevation 3-ish */
    --details-drills-bg: var(--m3-tertiary-container-light); --details-drills-text: var(--m3-on-tertiary-container-light);
    --details-mobility-bg: var(--m3-primary-container-light); --details-mobility-text: var(--m3-on-primary-container-light);
    --details-strength-bg: var(--m3-secondary-container-light); --details-strength-text: var(--m3-on-secondary-container-light);
    --video-link-text: var(--m3-primary-light);
    --video-link-hover-text: color-mix(in srgb, var(--m3-primary-light) 70%, var(--m3-on-primary-container-light));
    --updates-card-border-l: var(--m3-tertiary-light);

    /* Updates Modal */
    --updates-modal-bg: var(--m3-surface-2-light); /* Elevated surface for modal */
    --updates-modal-shadow: 0px 8px 10px 1px rgba(0,0,0,0.14), 0px 3px 14px 3px rgba(0,0,0,0.12), 0px 5px 5px -3px rgba(0,0,0,0.2); /* M3 Elevation 6 (Dialog) */
    --updates-modal-header-gradient-start: var(--m3-primary-light);
    --updates-modal-header-gradient-end: var(--m3-tertiary-light);
    --updates-modal-close-text: var(--m3-on-surface-variant-light);
    --updates-modal-close-bg: var(--m3-surface-3-light);
    --updates-modal-close-hover-text: var(--m3-on-primary-container-light);
    --updates-modal-close-hover-bg: var(--m3-primary-container-light);
    --updates-modal-card-bg: var(--m3-surface-1-light);
    --updates-modal-card-border-l: var(--m3-primary-light);

    /* Print - these are usually black/white, should be fine but map to ensure consistency */
    --print-body-bg: #FFFFFF;
    --print-text: #000000;
    --print-table-border: #CCCCCC;
    --print-table-th-bg: #F0F0F0;
    --print-notes-border: #DDDDDD;

    /* Today Pace Table */
    --today-pace-table-border: var(--m3-outline-variant-light);
    --today-pace-table-th-bg: var(--m3-surface-2-light);
    --today-pace-table-th-text: var(--m3-on-surface-light);
    --today-pace-table-header-low: var(--m3-primary-light);
    --today-pace-table-header-average: var(--m3-tertiary-light);
    --today-pace-table-header-high: var(--m3-error-light);

    /* Today's Activity Box */
    --todays-activity-box-border: var(--m3-outline-variant-light);
    --todays-activity-box-bg: var(--m3-surface-1-light);
    --todays-activity-text-default: var(--m3-primary-light); /* Default, overridden by specific classes */
    --todays-weekly-notes-box-border: var(--m3-outline-variant-light);
    --todays-weekly-notes-box-bg: var(--m3-surface-bright-light);

    /* Mobile Calendar Day Backgrounds (semantic, map to M3 containers) */
    --mobile-calendar-day-fartlek-bg: var(--m3-error-container-light); --mobile-calendar-day-fartlek-text: var(--m3-on-error-container-light);
    --mobile-calendar-day-easy-green-bg: var(--m3-tertiary-container-light); --mobile-calendar-day-easy-green-text: var(--m3-on-tertiary-container-light);
    --mobile-calendar-day-interval-bg: color-mix(in srgb, var(--m3-error-light) 30%, var(--m3-surface-light)); --mobile-calendar-day-interval-text: var(--m3-error-light);
    --mobile-calendar-day-easy-bg: var(--m3-primary-container-light); --mobile-calendar-day-easy-text: var(--m3-on-primary-container-light);
    --mobile-calendar-day-tempo-bg: var(--m3-secondary-container-light); --mobile-calendar-day-tempo-text: var(--m3-on-secondary-container-light);
    --mobile-calendar-day-long-bg: var(--m3-primary-container-light); --mobile-calendar-day-long-text: var(--m3-on-primary-container-light); /* Could be a variant */
    --mobile-calendar-day-race-bg: var(--m3-tertiary-container-light); --mobile-calendar-day-race-text: var(--m3-on-tertiary-container-light); /* Could be a variant */
    --mobile-calendar-day-rest-bg: var(--m3-surface-variant-light); --mobile-calendar-day-rest-text: var(--m3-on-surface-variant-light);
    --mobile-calendar-day-default-bg: var(--m3-surface-2-light); --mobile-calendar-day-default-text: var(--m3-on-surface-light);
    --mobile-calendar-day-today-number-text: var(--m3-on-primary-container-light); /* Text on today's bg */

    /* Dark Mode Variables - These will be replaced by M3 dark variables below */
    /* --dm-body-bg: #111827; */ /* gray-900 */
    /* --dm-text-color: #f3f4f6; */ /* gray-100 */
    /* --dm-main-container-bg: #1f2937; */ /* gray-800 */
    /* All --dm-* variables are now removed or commented out.
       The body.dark-mode rule will now map directly to M3 dark variables. */
}

body {
    font-family: 'Ubuntu', sans-serif;
    background-color: var(--body-bg);
    color: var(--text-color);
    font-size: 1rem; /* 16px - M3 Body Large */
    font-weight: 400; /* M3 Body Large */
    line-height: 1.5; /* M3 Body Large line height (24px for 16px size) */
    letter-spacing: 0.03125em; /* M3 Body Large letter spacing (0.5px for 16px size) */
}
body.dark-mode {
    /* M3 Dark Theme Base */
    --body-bg: var(--m3-background-dark);
    --text-color: var(--m3-on-background-dark);
    --main-container-bg: var(--m3-surface-1-dark); /* Elevated surface */
    /* M3 Shadow (conceptual) */
    --main-container-shadow: 0px 1px 2px 0px rgba(0,0,0,0.3), 0px 1px 3px 1px rgba(0,0,0,0.15); /* M3 Elevation 1-ish */

    /* General Interactive Elements */
    --nav-button-hover-bg: var(--m3-surface-2-dark);
    --nav-button-hover-text: var(--m3-on-surface-dark);

    /* Active Nav Buttons - M3 Dark Mapping */
    --nav-button-active-overview-bg: var(--m3-primary-dark);
    --nav-button-active-overview-text: var(--m3-on-primary-dark);
    --nav-button-active-overview-hover-bg: color-mix(in srgb, var(--m3-primary-dark) 90%, black);
    --nav-button-active-plan-bg: var(--m3-secondary-dark);
    --nav-button-active-plan-text: var(--m3-on-secondary-dark);
    --nav-button-active-plan-hover-bg: color-mix(in srgb, var(--m3-secondary-dark) 90%, black);
    --nav-button-active-calendar-bg: var(--m3-tertiary-dark);
    --nav-button-active-calendar-text: var(--m3-on-tertiary-dark);
    --nav-button-active-calendar-hover-bg: color-mix(in srgb, var(--m3-tertiary-dark) 90%, black);
    --nav-button-active-race-bg: var(--m3-primary-container-dark);
    --nav-button-active-race-text: var(--m3-on-primary-container-dark);
    --nav-button-active-race-hover-bg: color-mix(in srgb, var(--m3-primary-container-dark) 90%, white);
    --nav-button-active-info-bg: var(--m3-secondary-container-dark);
    --nav-button-active-info-text: var(--m3-on-secondary-container-dark);
    --nav-button-active-info-hover-bg: color-mix(in srgb, var(--m3-secondary-container-dark) 90%, white);
    --nav-button-active-companion-bg: var(--m3-tertiary-container-dark);
    --nav-button-active-companion-text: var(--m3-on-tertiary-container-dark);
    --nav-button-active-companion-hover-bg: color-mix(in srgb, var(--m3-tertiary-container-dark) 90%, white);

    /* Phase Buttons - M3 Dark Mapping */
    --phase-button-preseason-border: var(--m3-outline-dark);
    --phase-button-preseason-text: var(--m3-on-surface-variant-dark);
    --phase-button-preseason-hover-bg: var(--m3-surface-variant-dark);
    --phase-button-preseason-active-bg: var(--m3-secondary-container-dark);
    --phase-button-preseason-active-text: var(--m3-on-secondary-container-dark);
    --phase-button-preseason-active-border: var(--m3-secondary-container-dark);

    --phase-button-base-border: var(--m3-primary-dark);
    --phase-button-base-text: var(--m3-primary-dark);
    --phase-button-base-hover-bg: var(--m3-primary-container-dark);
    --phase-button-base-active-bg: var(--m3-primary-dark);
    --phase-button-base-active-text: var(--m3-on-primary-dark);

    --phase-button-specific-border: var(--m3-tertiary-dark);
    --phase-button-specific-text: var(--m3-tertiary-dark);
    --phase-button-specific-hover-bg: var(--m3-tertiary-container-dark);
    --phase-button-specific-active-bg: var(--m3-tertiary-dark);
    --phase-button-specific-active-text: var(--m3-on-tertiary-dark);
    --phase-button-specific-active-border: var(--m3-tertiary-dark);

    --phase-button-taper-border: var(--m3-error-dark);
    --phase-button-taper-text: var(--m3-error-dark);
    --phase-button-taper-hover-bg: var(--m3-error-container-dark);
    --phase-button-taper-active-bg: var(--m3-error-dark);
    --phase-button-taper-active-text: var(--m3-on-error-dark);
    --phase-button-taper-active-border: var(--m3-error-dark);

    /* Week Buttons - M3 Dark */
    --week-button-border: var(--m3-outline-dark);
    --week-button-active-bg: var(--m3-primary-dark);
    --week-button-active-text: var(--m3-on-primary-dark);
    --week-button-active-border: var(--m3-primary-dark);

    --week-button-preseason-text: var(--m3-on-surface-variant-dark);
    --week-button-preseason-hover-bg: var(--m3-surface-variant-dark);
    --week-button-preseason-hover-border: var(--m3-outline-variant-dark);
    --week-button-base-text: var(--m3-primary-dark);
    --week-button-base-hover-bg: var(--m3-primary-container-dark);
    --week-button-base-hover-border: var(--m3-primary-container-dark);
    --week-button-specific-text: var(--m3-tertiary-dark);
    --week-button-specific-hover-bg: var(--m3-tertiary-container-dark);
    --week-button-specific-hover-border: var(--m3-tertiary-container-dark);
    --week-button-taper-text: var(--m3-error-dark);
    --week-button-taper-hover-bg: var(--m3-error-container-dark);
    --week-button-taper-hover-border: var(--m3-error-container-dark);

    /* Content Cards - M3 Dark */
    --content-card-bg: var(--m3-surface-1-dark);
    --overview-section-card-border-l: var(--m3-primary-dark);
    --overview-section-card-border-b: var(--m3-secondary-dark);
    --news-section-card-border-l: var(--m3-tertiary-dark);
    --news-section-card-border-b: var(--m3-primary-container-dark);
    --race-section-card-border-l: var(--m3-secondary-container-dark);
    --race-section-card-border-b: var(--m3-tertiary-container-dark); /* Or specific like #EFB8C8 for pink */

    /* Tables - M3 Dark */
    --table-border: var(--m3-outline-dark);
    --table-th-bg: var(--m3-surface-2-dark);
    --schedule-table-border: var(--m3-outline-variant-dark);
    --schedule-table-th-bg: var(--m3-surface-dim-dark); /* Dimmer for header */
    --schedule-table-th-text: var(--m3-on-surface-dark);

    /* Inputs and Labels - M3 Dark */
    --input-userid-border: var(--m3-primary-dark);
    --input-userid-focus-border: var(--m3-primary-dark);
    --input-userid-focus-shadow: 0 0 0 2px var(--m3-primary-container-dark);
    --label-userid-border-l: var(--m3-primary-dark);
    --input-focus-border: var(--m3-primary-dark);
    --input-focus-shadow: 0 0 0 2px var(--m3-primary-container-dark);

    /* Logo - M3 Dark Accents */
    --logo-d-text: var(--m3-primary-dark);
    --logo-n-gradient-start: var(--m3-primary-dark);
    --logo-n-gradient-end: var(--m3-secondary-dark);
    --logo-a-text: var(--m3-secondary-dark);
    --logo-border-top: var(--m3-secondary-dark);
    --logo-border-right: var(--m3-primary-dark);
    --logo-border-bottom: var(--m3-primary-dark);
    --logo-border-left: var(--m3-secondary-dark);

    /* Scrollbar - M3 Dark */
    --scrollbar-track-bg: var(--m3-surface-variant-dark);
    --scrollbar-thumb-bg: var(--m3-outline-dark);
    --scrollbar-thumb-hover-bg: var(--m3-on-surface-variant-dark);

    /* Messages - M3 Dark */
    --loading-message-text: var(--m3-primary-dark);
    --error-message-text: var(--m3-on-error-container-dark);
    --error-message-bg: var(--m3-error-container-dark);
    --error-message-border: var(--m3-error-dark);

    /* PWA Install Button - M3 Dark */
    --install-pwa-button-bg: var(--m3-primary-dark);
    --install-pwa-button-text: var(--m3-on-primary-dark);
    --install-pwa-button-border: var(--m3-primary-dark);
    --install-pwa-button-hover-bg: color-mix(in srgb, var(--m3-primary-dark) 90%, black);
    --install-pwa-button-hover-border: color-mix(in srgb, var(--m3-primary-dark) 90%, black);

    /* Calendar - M3 Dark */
    --calendar-grid-bg: var(--m3-surface-variant-dark);
    --calendar-grid-border: var(--m3-outline-variant-dark);
    --calendar-header-bg: var(--m3-secondary-container-dark);
    --calendar-header-text: var(--m3-on-secondary-container-dark);
    --calendar-header-border: var(--m3-outline-variant-dark);
    --calendar-day-bg: var(--m3-surface-dark);
    --calendar-day-border: var(--m3-outline-variant-dark);
    --calendar-day-hover-bg: var(--m3-surface-2-dark);
    --calendar-day-other-month-bg: var(--m3-surface-dim-dark);
    --calendar-day-other-month-text: var(--m3-on-surface-variant-dark);
    --calendar-day-today-bg: var(--m3-primary-container-dark);
    --calendar-day-today-border: var(--m3-primary-dark);

    /* Activity Thumbnails - M3 Dark Containers */
    --activity-thumb-easy-bg: var(--m3-primary-container-dark); --activity-thumb-easy-text: var(--m3-on-primary-container-dark);
    --activity-thumb-easy-green-bg: var(--m3-tertiary-container-dark); --activity-thumb-easy-green-text: var(--m3-on-tertiary-container-dark);
    --activity-thumb-fartlek-bg: var(--m3-error-container-dark); --activity-thumb-fartlek-text: var(--m3-on-error-container-dark);
    --activity-thumb-tempo-bg: var(--m3-secondary-container-dark); --activity-thumb-tempo-text: var(--m3-on-secondary-container-dark);
    --activity-thumb-interval-bg: color-mix(in srgb, var(--m3-error-dark) 30%, var(--m3-surface-dark)); --activity-thumb-interval-text: var(--m3-error-dark);
    --activity-thumb-long-bg: var(--m3-primary-container-dark); --activity-thumb-long-text: var(--m3-on-primary-container-dark);
    --activity-thumb-race-bg: var(--m3-tertiary-container-dark); --activity-thumb-race-text: var(--m3-on-tertiary-container-dark);
    --activity-thumb-rest-bg: var(--m3-surface-variant-dark); --activity-thumb-rest-text: var(--m3-on-surface-variant-dark);
    --activity-thumb-default-bg: var(--m3-surface-2-dark); --activity-thumb-default-text: var(--m3-on-surface-dark);

    /* Custom Rect Borders - M3 Dark */
    --custom-rect-nav-border-t: var(--m3-secondary-dark);
    --custom-rect-nav-border-r: var(--m3-primary-dark);
    --custom-rect-nav-border-b: var(--m3-primary-dark);
    --custom-rect-nav-border-l: var(--m3-secondary-dark);

    --custom-rect-today-border-t: var(--m3-secondary-dark);
    --custom-rect-today-border-r: var(--m3-primary-dark);
    --custom-rect-today-border-b: var(--m3-primary-dark);
    --custom-rect-today-border-l: var(--m3-secondary-dark);

    --custom-rect-this-week-border-t: var(--m3-tertiary-dark);
    --custom-rect-this-week-border-l: var(--m3-tertiary-dark);
    --custom-rect-this-week-border-b: var(--m3-error-dark);
    --custom-rect-this-week-border-r: var(--m3-error-dark);

    /* Titles - M3 Dark */
    --title-project-text: var(--m3-secondary-dark);
    --title-marathon-text: var(--m3-primary-dark);

    /* Loader - M3 Dark */
    --loader-border: var(--m3-surface-variant-dark);
    --loader-border-top: var(--m3-primary-dark);
    /* PDF Button - M3 Dark */
    --pdf-button-bg: var(--m3-secondary-dark);
    --pdf-button-text: var(--m3-on-secondary-dark);
    --pdf-button-hover-bg: color-mix(in srgb, var(--m3-secondary-dark) 90%, black);
    /* Calendar Nav Button - M3 Dark */
    --calendar-nav-button-bg: var(--m3-primary-container-dark);
    --calendar-nav-button-text: var(--m3-on-primary-container-dark);
    --calendar-nav-button-hover-bg: color-mix(in srgb, var(--m3-primary-container-dark) 90%, var(--m3-on-primary-container-dark));

    /* Toggle Button - M3 Dark */
    --toggle-button-bg: var(--m3-secondary-container-dark);
    --toggle-button-text: var(--m3-on-secondary-container-dark);
    --toggle-button-border: var(--m3-secondary-dark);
    --toggle-button-hover-bg: color-mix(in srgb, var(--m3-secondary-container-dark) 90%, var(--m3-on-secondary-container-dark));
    --toggle-button-hover-border: color-mix(in srgb, var(--m3-secondary-dark) 90%, black);

    /* Activity Text - M3 Dark (using direct M3 color roles or lightened versions of light mode semantic colors) */
    --activity-text-easy: var(--m3-primary-dark);
    --activity-text-recovery: var(--m3-secondary-dark);
    --activity-text-base: var(--m3-tertiary-dark);
    --activity-text-tempo: color-mix(in srgb, var(--m3-secondary-dark) 70%, orange);
    --activity-text-interval: var(--m3-error-dark);
    --activity-text-fartlek: color-mix(in srgb, var(--m3-error-dark) 70%, #FFC0CB); /* Pinkish */
    --activity-text-str-hills: color-mix(in srgb, var(--m3-neutral-dark) 70%, #A0522D); /* Sienna */
    --activity-text-rest: var(--m3-on-surface-variant-dark);
    --activity-text-zone-race: var(--m3-primary-container-dark);
    --activity-text-double: color-mix(in srgb, var(--m3-secondary-dark) 70%, #A0522D);
    --activity-text-mobility: color-mix(in srgb, var(--m3-neutral-dark) 70%, #20B2AA); /* LightSeaGreen */

    --highlight-zone-pace-bg: var(--m3-primary-container-dark);
    --highlight-zone-pace-text: var(--m3-on-primary-container-dark);

    /* Companion App Nav Buttons - M3 Dark */
    --companion-nav-button-hover-bg: var(--m3-surface-2-dark);
    --companion-nav-button-hover-text: var(--m3-on-surface-dark);
    --companion-nav-button-active-drills-bg: var(--m3-tertiary-container-dark);
    --companion-nav-button-active-drills-text: var(--m3-on-tertiary-container-dark);
    --companion-nav-button-active-mobility-bg: var(--m3-primary-container-dark);
    --companion-nav-button-active-mobility-text: var(--m3-on-primary-container-dark);
    --companion-nav-button-active-strength-bg: var(--m3-secondary-container-dark);
    --companion-nav-button-active-strength-text: var(--m3-on-secondary-container-dark);

    /* Exercise Card - M3 Dark */
    --exercise-card-bg: var(--m3-surface-2-dark);
    --exercise-card-shadow: 0px 1px 2px 0px rgba(0,0,0,0.3), 0px 2px 6px 2px rgba(0,0,0,0.15); /* M3 Elevation 2 */
    --exercise-card-hover-shadow: 0px 1px 2px 0px rgba(0,0,0,0.3), 0px 4px 8px 3px rgba(0,0,0,0.15); /* M3 Elevation 3 */
    --details-drills-bg: var(--m3-tertiary-container-dark); --details-drills-text: var(--m3-on-tertiary-container-dark);
    --details-mobility-bg: var(--m3-primary-container-dark); --details-mobility-text: var(--m3-on-primary-container-dark);
    --details-strength-bg: var(--m3-secondary-container-dark); --details-strength-text: var(--m3-on-secondary-container-dark);
    --video-link-text: var(--m3-primary-dark);
    --video-link-hover-text: color-mix(in srgb, var(--m3-primary-dark) 70%, var(--m3-on-primary-container-dark));
    --updates-card-border-l: var(--m3-tertiary-dark);

    /* Updates Modal - M3 Dark */
    --updates-modal-bg: var(--m3-surface-2-dark);
    --updates-modal-shadow: 0px 8px 10px 1px rgba(0,0,0,0.14), 0px 3px 14px 3px rgba(0,0,0,0.12), 0px 5px 5px -3px rgba(0,0,0,0.2); /* M3 Elevation 6 */
    --updates-modal-header-gradient-start: var(--m3-primary-dark);
    --updates-modal-header-gradient-end: var(--m3-tertiary-dark);
    --updates-modal-close-text: var(--m3-on-surface-variant-dark);
    --updates-modal-close-bg: var(--m3-surface-3-dark);
    --updates-modal-close-hover-text: var(--m3-on-primary-container-dark);
    --updates-modal-close-hover-bg: var(--m3-primary-container-dark);
    --updates-modal-card-bg: var(--m3-surface-1-dark);
    --updates-modal-card-border-l: var(--m3-primary-dark);

    /* Today Pace Table - M3 Dark */
    --today-pace-table-border: var(--m3-outline-variant-dark);
    --today-pace-table-th-bg: var(--m3-surface-2-dark);
    --today-pace-table-th-text: var(--m3-on-surface-dark);
    --today-pace-table-header-low: var(--m3-primary-dark);
    --today-pace-table-header-average: var(--m3-tertiary-dark);
    --today-pace-table-header-high: var(--m3-error-dark);

    /* Today's Activity Box - M3 Dark */
    --todays-activity-box-border: var(--m3-outline-variant-dark);
    --todays-activity-box-bg: var(--m3-surface-1-dark);
    --todays-activity-text-default: var(--m3-primary-dark);
    --todays-weekly-notes-box-border: var(--m3-outline-variant-dark);
    --todays-weekly-notes-box-bg: var(--m3-surface-dim-dark);

    /* Mobile Calendar Day Backgrounds - M3 Dark */
    --mobile-calendar-day-fartlek-bg: var(--m3-error-container-dark); --mobile-calendar-day-fartlek-text: var(--m3-on-error-container-dark);
    --mobile-calendar-day-easy-green-bg: var(--m3-tertiary-container-dark); --mobile-calendar-day-easy-green-text: var(--m3-on-tertiary-container-dark);
    --mobile-calendar-day-interval-bg: color-mix(in srgb, var(--m3-error-dark) 30%, var(--m3-surface-dark)); --mobile-calendar-day-interval-text: var(--m3-error-dark);
    --mobile-calendar-day-easy-bg: var(--m3-primary-container-dark); --mobile-calendar-day-easy-text: var(--m3-on-primary-container-dark);
    --mobile-calendar-day-tempo-bg: var(--m3-secondary-container-dark); --mobile-calendar-day-tempo-text: var(--m3-on-secondary-container-dark);
    --mobile-calendar-day-long-bg: var(--m3-primary-container-dark); --mobile-calendar-day-long-text: var(--m3-on-primary-container-dark);
    --mobile-calendar-day-race-bg: var(--m3-tertiary-container-dark); --mobile-calendar-day-race-text: var(--m3-on-tertiary-container-dark);
    --mobile-calendar-day-rest-bg: var(--m3-surface-variant-dark); --mobile-calendar-day-rest-text: var(--m3-on-surface-variant-dark);
    --mobile-calendar-day-default-bg: var(--m3-surface-2-dark); --mobile-calendar-day-default-text: var(--m3-on-surface-dark);
    --mobile-calendar-day-today-number-text: var(--m3-on-primary-container-dark);

    /* ----- Restored Specific Dark Mode Overrides ----- */
    /* Logo colors */
    --logo-d-text: var(--m3-primary-dark);
    --logo-n-gradient-start: var(--m3-primary-dark);
    --logo-n-gradient-end: var(--m3-secondary-dark);
    --logo-a-text: var(--m3-secondary-dark);
    --logo-border-top: var(--m3-secondary-dark);
    --logo-border-right: var(--m3-primary-dark);
    --logo-border-bottom: var(--m3-primary-dark);
    --logo-border-left: var(--m3-secondary-dark);

    /* Card Border Overrides */
    --overview-section-card-border-l: var(--m3-primary-dark);
    --overview-section-card-border-b: var(--m3-secondary-dark);
    --news-section-card-border-l: var(--m3-tertiary-container-dark); /* Was --dm-updates-modal-header-gradient-start */
    --news-section-card-border-b: var(--m3-tertiary-dark); /* Was --nav-button-active-calendar-bg */
    --race-section-card-border-l: var(--m3-primary-container-dark); /* Was --nav-button-active-race-bg */
    --race-section-card-border-b: var(--m3-tertiary-dark); /* Was #db2777, mapped to M3 tertiary */

    /* Custom Rect Borders */
    --custom-rect-nav-border-t: var(--m3-secondary-dark);
    --custom-rect-nav-border-r: var(--m3-primary-dark);
    --custom-rect-nav-border-b: var(--m3-primary-dark);
    --custom-rect-nav-border-l: var(--m3-secondary-dark);

    --custom-rect-today-border-t: var(--m3-secondary-dark);
    --custom-rect-today-border-r: var(--m3-primary-dark);
    --custom-rect-today-border-b: var(--m3-primary-dark);
    --custom-rect-today-border-l: var(--m3-secondary-dark);

    /* Input field background and text for dark mode (previously inline in body.dark-mode input selectors) */
    --dm-input-bg: var(--m3-surface-2-dark); /* A slightly elevated surface for input fields */
    --dm-input-text: var(--m3-on-surface-dark);
    --dm-input-border: var(--m3-outline-dark);
}
}

/* ----- Restored Tailwind Specific Overrides for Dark Mode ----- */
body.dark-mode .custom-rect-border-this-week {
    border-top-color: var(--m3-tertiary-dark) !important;
    border-left-color: var(--m3-tertiary-dark) !important;
    border-bottom-color: var(--m3-primary-container-dark) !important;
    border-right-color: var(--m3-primary-container-dark) !important;
}

body.dark-mode .calendar-day .day-number { color: var(--m3-on-surface-dark); }
body.dark-mode .calendar-day.is-today .day-number { color: var(--m3-on-primary-container-dark); }
body.dark-mode .calendar-nav-button svg { color: var(--m3-on-primary-container-dark); }

body.dark-mode #darkModeToggle svg {
    stroke: var(--m3-on-surface-dark);
}

/* Ensure Tailwind's text colors in HTML are overridden for dark mode */
body.dark-mode .text-stone-800 { color: var(--m3-on-surface-dark) !important; }
body.dark-mode .text-stone-700 { color: var(--m3-on-surface-variant-dark) !important; }
body.dark-mode .text-stone-600 { color: var(--m3-neutral-variant-dark) !important; }
body.dark-mode .text-sky-600 { color: var(--m3-primary-dark) !important; }
body.dark-mode .text-sky-700 { color: color-mix(in srgb, var(--m3-primary-dark) 80%, black) !important; }
body.dark-mode .text-amber-500 { color: var(--m3-secondary-dark) !important; }
body.dark-mode .text-green-700 { color: var(--m3-tertiary-dark) !important; }
body.dark-mode .text-violet-700 { color: var(--m3-primary-container-dark) !important; }
body.dark-mode .text-violet-600 { color: color-mix(in srgb, var(--m3-primary-container-dark) 80%, white) !important; }
body.dark-mode .text-indigo-700 { color: var(--m3-primary-dark) !important; } /* Remap indigo to primary */
body.dark-mode .text-indigo-800 { color: color-mix(in srgb, var(--m3-primary-dark) 70%, black) !important; }
body.dark-mode .text-emerald-600 { color: var(--m3-tertiary-container-dark) !important; }
body.dark-mode .text-emerald-700 { color: var(--m3-tertiary-dark) !important; }
body.dark-mode .text-yellow-500 { color: var(--m3-secondary-container-dark) !important; }


/* Ensure Tailwind's background colors in HTML are overridden for dark mode */
body.dark-mode .bg-sky-600 { background-color: var(--m3-primary-dark) !important; }
body.dark-mode .hover\:bg-sky-700:hover { background-color: color-mix(in srgb, var(--m3-primary-dark) 80%, black) !important; }

/* Dark mode for table row backgrounds (Tailwind bg-color-50 series) */
body.dark-mode .bg-stone-100 { background-color: var(--m3-surface-2-dark) !important; }
body.dark-mode .bg-red-50 { background-color: color-mix(in srgb, var(--m3-error-container-dark) 80%, var(--m3-surface-dark)) !important; }
body.dark-mode .bg-orange-50 { background-color: color-mix(in srgb, var(--m3-secondary-container-dark) 30%, var(--m3-surface-dark)) !important; } /* orange -> secondary based */
body.dark-mode .bg-amber-50 { background-color: var(--m3-secondary-container-dark) !important; }
body.dark-mode .bg-yellow-50 { background-color: color-mix(in srgb, var(--m3-secondary-container-dark) 60%, var(--m3-surface-dark)) !important; }
body.dark-mode .bg-lime-50 { background-color: color-mix(in srgb, var(--m3-tertiary-container-dark) 30%, var(--m3-surface-dark)) !important; } /* lime -> tertiary based */
body.dark-mode .bg-green-50 { background-color: var(--m3-tertiary-container-dark) !important; }
body.dark-mode .bg-emerald-50 { background-color: color-mix(in srgb, var(--m3-tertiary-container-dark) 60%, var(--m3-surface-dark)) !important; }
body.dark-mode .bg-violet-50 { background-color: color-mix(in srgb, var(--m3-primary-container-dark) 60%, var(--m3-surface-dark)) !important; }


/* Ensure text in these specific background rows is light */
body.dark-mode .bg-red-50 td, body.dark-mode .bg-red-50 strong,
body.dark-mode .bg-orange-50 td, body.dark-mode .bg-orange-50 strong,
body.dark-mode .bg-amber-50 td, body.dark-mode .bg-amber-50 strong,
body.dark-mode .bg-yellow-50 td, body.dark-mode .bg-yellow-50 strong,
body.dark-mode .bg-lime-50 td, body.dark-mode .bg-lime-50 strong,
body.dark-mode .bg-green-50 td, body.dark-mode .bg-green-50 strong,
body.dark-mode .bg-emerald-50 td, body.dark-mode .bg-emerald-50 strong,
body.dark-mode .bg-violet-50 td, body.dark-mode .bg-violet-50 strong,
body.dark-mode .bg-stone-100 td, body.dark-mode .bg-stone-100 strong,
body.dark-mode .bg-stone-100 th {
    color: var(--m3-on-surface-dark) !important; /* General on-surface for dark theme */
}

/* Override for mileage chart modal background and text */
body.dark-mode #mileage-chart-modal > div {
    background-color: var(--m3-surface-2-dark); /* Elevated dialog surface */
    color: var(--m3-on-surface-dark);
}
body.dark-mode #mileage-chart-modal-title {
    color: var(--m3-primary-dark);
}
body.dark-mode #closeMileageChartBtn {
    color: var(--m3-on-surface-dark);
}
body.dark-mode #closeMileageChartBtn:hover {
    color: var(--m3-primary-dark);
}

/* Specific text color overrides for today-pace-table if not covered by general text-stone or activity-text */
body.dark-mode .today-pace-table .text-teal-700 { color: var(--m3-tertiary-dark) !important; } /* Teal -> Tertiary */
body.dark-mode .today-pace-table .text-green-600 { color: var(--m3-primary-dark) !important; } /* Green -> Primary */
body.dark-mode .today-pace-table .text-sky-600 { color: var(--m3-secondary-dark) !important; } /* Sky -> Secondary */
body.dark-mode .today-pace-table .text-lime-600 { color: color-mix(in srgb, var(--m3-tertiary-dark) 70%, white) !important; }
body.dark-mode .today-pace-table .text-amber-500 { color: var(--m3-secondary-dark) !important; } /* Amber -> Secondary */
body.dark-mode .today-pace-table .text-red-600 { color: var(--m3-error-dark) !important; }

/* Ensure all text in schedule-table and today-pace-table defaults to M3 colors */
body.dark-mode .schedule-table td,
body.dark-mode .today-pace-table td {
    color: var(--m3-on-surface-dark); /* Default for all td cells */
}
body.dark-mode .schedule-table td.font-bold { /* Day name */
    color: var(--m3-on-surface-dark) !important;
}
/* Ensure specific pace zone colors in today's pace table override the default td color */
body.dark-mode .today-pace-table td.text-green-600 { color: var(--m3-primary-dark) !important; }
body.dark-mode .today-pace-table td.text-sky-600 { color: var(--m3-secondary-dark) !important; }

/* Dark mode for input fields that were previously missed in the main block */
body.dark-mode input[type="text"]:not(#userIdInput),
body.dark-mode input[type="number"],
body.dark-mode input[type="date"] {
    background-color: var(--dm-input-bg);
    color: var(--dm-input-text);
    border: 1px solid var(--dm-input-border);
}

/* Dark mode for updates card (overview page) and modal */
body.dark-mode .updates-card { /* Used on overview page */
    border-left-color: var(--m3-tertiary-container-dark);
}
body.dark-mode #updates-modal .updates-card { /* Used inside modal */
    border-left-color: var(--m3-primary-dark);
    background-color: var(--m3-surface-1-dark);
}
body.dark-mode #updates-modal .updates-modal-content-wrapper {
     background-color: var(--m3-surface-2-dark); /* Modal content wrapper slightly more elevated */
}

/* Dark mode for today card navigation arrows */
body.dark-mode #todayPrevDay:not(:disabled),
body.dark-mode #todayNextDay:not(:disabled) {
    color: var(--m3-primary-dark);
}
body.dark-mode #todayPrevDay:not(:disabled):hover,
body.dark-mode #todayNextDay:not(:disabled):hover {
    background-color: var(--m3-surface-3-dark); /* Slightly more elevated on hover */
    color: var(--m3-primary-dark);
}

.main-container {
    background-color: var(--main-container-bg);
    border-radius: 0.75rem; /* 12px - Good for M3 Card */
    box-shadow: var(--main-container-shadow);
    width: 100%;
    max-width: 64rem; /* 1024px */
    padding: 1.5rem;
    margin-left: auto;
    margin-right: auto;
}
@media (min-width: 640px) {
    .main-container {
        padding: 2rem;
    }
}
.nav-button {
    padding: 0.625rem 1.5rem; /* 10px 24px - M3 Text Button like */
    border-radius: 9999px; /* Pill shape */
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    font-size: 0.875rem; /* 14px - M3 Label Large */
    font-weight: 600; /* M3 Label Large (often 500, but 600 is common here) */
    letter-spacing: 0.00625em; /* M3 Label Large (0.1px for 14px size) */
    text-transform: none; /* M3 Buttons are sentence case */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}
.nav-button:hover:not(.active-overview):not(.active-plan):not(.active-calendar):not(.active-race):not(.active-info):not(.active-companion) {
    background-color: var(--nav-button-hover-bg);
    color: var(--nav-button-hover-text);
}

.nav-button.active-overview { background-color: var(--nav-button-active-overview-bg); color: var(--nav-button-active-overview-text); }
.nav-button.active-overview:hover { background-color: var(--nav-button-active-overview-hover-bg); }

.nav-button.active-plan { background-color: var(--nav-button-active-plan-bg); color: var(--nav-button-active-plan-text); }
.nav-button.active-plan:hover { background-color: var(--nav-button-active-plan-hover-bg); }

.nav-button.active-calendar { background-color: var(--nav-button-active-calendar-bg); color: var(--nav-button-active-calendar-text); }
.nav-button.active-calendar:hover { background-color: var(--nav-button-active-calendar-hover-bg); }

.nav-button.active-race { background-color: var(--nav-button-active-race-bg); color: var(--nav-button-active-race-text); }
.nav-button.active-race:hover { background-color: var(--nav-button-active-race-hover-bg); }

.nav-button.active-info { background-color: var(--nav-button-active-info-bg); color: var(--nav-button-active-info-text); }
.nav-button.active-info:hover { background-color: var(--nav-button-active-info-hover-bg); }

.nav-button.active-companion { background-color: var(--nav-button-active-companion-bg); color: var(--nav-button-active-companion-text); }
.nav-button.active-companion:hover { background-color: var(--nav-button-active-companion-hover-bg); }


.phase-button {
    padding: 0.5rem 1.25rem; /* 8px 20px */
    border-radius: 8px; /* M3 small button */
    border-width: 1px;
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
    font-size: 0.875rem; /* 14px - M3 Label Large */
    font-weight: 500; /* M3 Label Large */
    letter-spacing: 0.00625em; /* M3 Label Large */
    text-transform: none;
}
.phase-button-preseason { border-color: var(--phase-button-preseason-border); color: var(--phase-button-preseason-text); }
.phase-button-preseason:hover:not(.active) { background-color: var(--phase-button-preseason-hover-bg); }
.phase-button-preseason.active { background-color: var(--phase-button-preseason-active-bg); color: var(--phase-button-preseason-active-text); border-color: var(--phase-button-preseason-active-border); }

.phase-button-base { border-color: var(--phase-button-base-border); color: var(--phase-button-base-text); }
.phase-button-base:hover:not(.active) { background-color: var(--phase-button-base-hover-bg); }
.phase-button-base.active { background-color: var(--phase-button-base-active-bg); color: var(--phase-button-base-active-text); }

.phase-button-specific { border-color: var(--phase-button-specific-border); color: var(--phase-button-specific-text); }
.phase-button-specific:hover:not(.active) { background-color: var(--phase-button-specific-hover-bg); }
.phase-button-specific.active { background-color: var(--phase-button-specific-active-bg); color: var(--phase-button-specific-active-text); border-color: var(--phase-button-specific-active-border); }

.phase-button-taper { border-color: var(--phase-button-taper-border); color: var(--phase-button-taper-text); }
.phase-button-taper:hover:not(.active) { background-color: var(--phase-button-taper-hover-bg); }
.phase-button-taper.active { background-color: var(--phase-button-taper-active-bg); color: var(--phase-button-taper-active-text); border-color: var(--phase-button-taper-active-border); }

.week-button {
    padding: 0.5rem 1rem; /* 8px 16px */
    border-radius: 8px; /* M3 small button */
    border: 1px solid var(--week-button-border);
    font-size: 0.875rem; /* 14px - M3 Label Large */
    font-weight: 500; /* M3 Label Large */
    letter-spacing: 0.00625em; /* M3 Label Large */
    text-transform: none;
    text-align: center;
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, border-color 0.2s ease-in-out;
}
.week-button.active {
    background-color: var(--week-button-active-bg);
    color: var(--week-button-active-text) !important;
    border-color: var(--week-button-active-border);
}

.week-button-text-preseason { color: var(--week-button-preseason-text); }
.week-button-text-preseason:not(.active):hover { background-color: var(--week-button-preseason-hover-bg); border-color: var(--week-button-preseason-hover-border); }

.week-button-text-base { color: var(--week-button-base-text); }
.week-button-text-base:not(.active):hover { background-color: var(--week-button-base-hover-bg); border-color: var(--week-button-base-hover-border); }

.week-button-text-specific { color: var(--week-button-specific-text); }
.week-button-text-specific:not(.active):hover { background-color: var(--week-button-specific-hover-bg); border-color: var(--week-button-specific-hover-border);}

.week-button-text-taper { color: var(--week-button-taper-text); }
.week-button-text-taper:not(.active):hover { background-color: var(--week-button-taper-hover-bg); border-color: var(--week-button-taper-hover-border);}

.content-card {
    background-color: var(--content-card-bg);
    padding: 1rem;
    border-radius: 12px; /* M3 Card */
}
.content-card h3.phase-title-style {
    margin-bottom: 0.5rem;
    font-size: 1.125rem; /* 18px - M3 Title Medium (could be 16px too) */
    font-weight: 600; /* M3 Title Medium (often 500) */
    letter-spacing: 0.009375em; /* M3 Title Medium (0.15px for 16px) */
    line-height: 1.5rem; /* 24px */
}

.overview-section-card { /* Base for most cards not getting custom rect border */
    border-left-width: 4px;
    border-bottom-width: 4px;
    border-left-color: var(--overview-section-card-border-l);
    border-bottom-color: var(--overview-section-card-border-b);
}
.news-section-card {
    border-left-width: 4px;
    border-bottom-width: 4px;
    border-left-color: var(--news-section-card-border-l);
    border-bottom-color: var(--news-section-card-border-b);
}
.race-section-card {
    border-left-width: 4px;
    border-bottom-width: 4px;
    border-left-color: var(--race-section-card-border-l);
    border-bottom-color: var(--race-section-card-border-b);
}

.chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
@media (min-width: 768px) { .chart-container { height: 350px; } }
.data-table { width: 100%; margin-top: 0.5rem; border-collapse: collapse; font-size: 0.75rem; /* 12px - M3 Body Small */ line-height: 1.33; /* 16px for 12px */ letter-spacing: 0.033em; /* 0.4px for 12px */ }
.data-table th, .data-table td { border: 1px solid var(--table-border); padding: 0.5rem; text-align: left; }
.data-table th { font-weight: 600; background-color: var(--table-th-bg); font-size: 0.75rem; /* M3 Label Small or Body Small */ }
.schedule-table { width: 100%; margin-top: 0.75rem; border-collapse: collapse; font-size: 0.75rem; /* 12px - M3 Body Small */ line-height: 1.33; letter-spacing: 0.033em; border: 1px solid var(--schedule-table-border); border-radius: 0.5rem; overflow: hidden; }
.schedule-table th, .schedule-table td { padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--schedule-table-border); }
.schedule-table th { background-color: var(--schedule-table-th-bg); color: var(--schedule-table-th-text); font-weight: 600; /* M3 Label Small/Medium often 500 */ font-size: 0.75rem; }
.schedule-table tr:last-child td { border-bottom: none; }
.schedule-table td:first-child { font-weight: 500; width: 25%; max-width: 100px; }

#userIdInput {
    border-width: 2px;
    border-color: var(--input-userid-border);
    background-color: var(--main-container-bg); /* For dark mode */
    border-radius: 8px;
    color: var(--text-color); /* For dark mode */
}
#userIdInput:focus {
    outline: 2px solid transparent; outline-offset: 2px; border-color: var(--input-userid-focus-border);
    box-shadow: 0 0 0 3px var(--input-userid-focus-shadow);
}
label[for="userIdInput"] {
    border-left-width: 4px;
    border-color: var(--label-userid-border-l);
    padding-left: 0.5rem;
    font-size: 0.75rem; /* 12px - M3 Body Small / Label Medium */
    font-weight: 400;
}
#loginButton {
    border-radius: 9999px;
}

input[type="text"]:not(#userIdInput):focus,
input[type="number"]:focus,
input[type="date"]:focus {
    outline: 2px solid transparent; outline-offset: 2px;
    border-color: var(--input-focus-border);
    box-shadow: 0 0 0 3px var(--input-focus-shadow);
    background-color: var(--main-container-bg); /* For dark mode */
    color: var(--text-color); /* For dark mode */
}
body.dark-mode input[type="text"]:not(#userIdInput),
body.dark-mode input[type="number"],
body.dark-mode input[type="date"] {
    background-color: var(--dm-main-container-bg); /* Should be input field specific bg */
    color: var(--dm-text-color);
    border: 1px solid var(--dm-table-border); /* Example border */
}


.css-logo-dna {
    font-family: 'Ubuntu', sans-serif;
    font-weight: 700;
    font-size: 3.75rem;
    line-height: 1;
    text-align: center;
    padding: 0.5rem 0.75rem;
    display: inline-block;
    border-top: 3px solid var(--logo-border-top);
    border-right: 3px solid var(--logo-border-right);
    border-bottom: 3px solid var(--logo-border-bottom);
    border-left: 3px solid var(--logo-border-left);
    margin-bottom: 0.75rem;
}
@media (min-width: 640px) {
    .css-logo-dna {
        font-size: 4.5rem;
        padding: 0.75rem 1rem;
    }
}
.css-logo-dna .logo-d {
    color: var(--logo-d-text);
}
.css-logo-dna .logo-n {
    background: linear-gradient(to bottom, var(--logo-n-gradient-start) 50%, var(--logo-n-gradient-end) 50%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    display: inline-block;
}
.css-logo-dna .logo-a {
    color: var(--logo-a-text);
}

::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--scrollbar-track-bg); border-radius: 10px; }
::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb-bg); border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover-bg); }
#loading-message, #login-loading-message { text-align: center; padding: 2rem; font-size: 1.125rem; font-weight: 500; }
#loading-message, #login-loading-message { color: var(--loading-message-text); } /* Combined for loading messages */
#error-message, #login-error-message { text-align: center; padding: 2rem; font-size: 1.125rem; font-weight: 500; }
#error-message, #login-error-message { color: var(--error-message-text); background-color: var(--error-message-bg); border: 1px solid var(--error-message-border); border-radius: 0.5rem; }

#installPwaButton {
    background-color: var(--install-pwa-button-bg);
    color: var(--install-pwa-button-text);
    font-size: 0.875rem; /* 14px - M3 Label Large */
    font-weight: 600; /* M3 Label Large (often 500) */
    letter-spacing: 0.00625em; /* M3 Label Large */
    text-transform: none;
    border: 2px solid var(--install-pwa-button-border);
    border-radius: 16px; /* M3 Extended FAB like */
}
#installPwaButton:hover {
    background-color: var(--install-pwa-button-hover-bg);
    border-color: var(--install-pwa-button-hover-border);
}

.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background-color: var(--calendar-grid-bg); border: 1px solid var(--calendar-grid-border); }
.calendar-header {
    text-align: center;
    padding: 0.5rem;
    background-color: var(--calendar-header-bg);
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--calendar-header-text);
    border: 1px solid var(--calendar-header-border);
}
.calendar-day { background-color: var(--calendar-day-bg); padding: 0.5rem; min-height: 100px; font-size: 0.75rem; border: 1px solid var(--calendar-day-border); cursor: default; border-radius: 8px; }
.calendar-day.has-activity { cursor: pointer; }
.calendar-day.has-activity:hover { background-color: var(--calendar-day-hover-bg); }
.calendar-day.other-month { background-color: var(--calendar-day-other-month-bg); color: var(--calendar-day-other-month-text); cursor: default;}
.calendar-day.other-month:hover { background-color: var(--calendar-day-other-month-bg); }
.calendar-day.is-today { background-color: var(--calendar-day-today-bg); border: 2px solid var(--calendar-day-today-border); }
.calendar-day .day-number { font-weight: 600; margin-bottom: 0.25rem; display: block; }
body.dark-mode .calendar-day .day-number { color: var(--dm-text-color); } /* Ensure day numbers are visible */
body.dark-mode .calendar-day.is-today .day-number { color: var(--dm-text-color); } /* Ensure today's day number is visible */


.activity-thumbnail {
    display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    padding: 0.25rem; border-radius: 0.25rem; margin-top: 0.25rem;
    font-size: 0.6875rem; /* 11px - M3 Label Small */
    font-weight: 500; /* M3 Label Small */
    letter-spacing: 0.045em; /* M3 Label Small (0.5px for 11px) */
}
.activity-thumbnail-easy { background-color: var(--activity-thumb-easy-bg); color: var(--activity-thumb-easy-text); }
.activity-thumbnail-easy-green { background-color: var(--activity-thumb-easy-green-bg); color: var(--activity-thumb-easy-green-text); }
.activity-thumbnail-fartlek { background-color: var(--activity-thumb-fartlek-bg); color: var(--activity-thumb-fartlek-text); }
.activity-thumbnail-tempo { background-color: var(--activity-thumb-tempo-bg); color: var(--activity-thumb-tempo-text); }
.activity-thumbnail-interval { background-color: var(--activity-thumb-interval-bg); color: var(--activity-thumb-interval-text); }
.activity-thumbnail-long { background-color: var(--activity-thumb-long-bg); color: var(--activity-thumb-long-text); }
.activity-thumbnail-race { background-color: var(--activity-thumb-race-bg); color: var(--activity-thumb-race-text); }
.activity-thumbnail-rest { background-color: var(--activity-thumb-rest-bg); color: var(--activity-thumb-rest-text); }
.activity-thumbnail-default { background-color: var(--activity-thumb-default-bg); color: var(--activity-thumb-default-text); }

.custom-rect-border-nav { /* For nav tabs */
    border-top: 3px solid var(--custom-rect-nav-border-t);
    border-right: 3px solid var(--custom-rect-nav-border-r);
    border-bottom: 3px solid var(--custom-rect-nav-border-b);
    border-left: 3px solid var(--custom-rect-nav-border-l);
    padding: 0.75rem !important; /* Unified padding */
    border-style: solid !important;
}
.custom-rect-border-today { /* For today's training card */
    border-top: 3px solid var(--custom-rect-today-border-t) !important;
    border-right: 3px solid var(--custom-rect-today-border-r) !important;
    border-bottom: 3px solid var(--custom-rect-today-border-b) !important;
    border-left: 3px solid var(--custom-rect-today-border-l) !important;
    border-style: solid !important;
}
.custom-rect-border-this-week { /* For this week's plan card */
    border-top: 3px solid var(--custom-rect-this-week-border-t) !important;
    border-left: 3px solid var(--custom-rect-this-week-border-l) !important;
    border-bottom: 3px solid var(--custom-rect-this-week-border-b) !important;
    border-right: 3px solid var(--custom-rect-this-week-border-r) !important;
    border-style: solid !important;
}
body.dark-mode .custom-rect-border-this-week {
    border-top-color: var(--nav-button-active-calendar-bg) !important; /* Example: green */
    border-left-color: var(--nav-button-active-calendar-bg) !important;
    border-bottom-color: var(--nav-button-active-race-bg) !important; /* Example: purple */
    border-right-color: var(--nav-button-active-race-bg) !important;
}


.main-title { /* Corresponds to h1.main-title */
    font-size: 2rem; /* 32px - M3 Headline Large */
    font-weight: 500; /* M3 Headline Large (often 400 or 500) */
    letter-spacing: 0; /* M3 Headline Large */
    line-height: 2.5rem; /* 40px for 32px size */
}
.title-project {
    color: var(--title-project-text);
}
.title-marathon {
    color: var(--title-marathon-text);
}

.loader {
    border: 4px solid var(--loader-border);
    border-top: 4px solid var(--loader-border-top);
    border-radius: 50%;
    width: 24px;
    height: 24px;
    animation: spin 1s linear infinite;
    margin: 10px auto;
}
.pdf-button {
    background-color: var(--pdf-button-bg);
    color: var(--pdf-button-text);
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem; /* 12px - M3 Label Medium */
    border-radius: 9999px;
    font-weight: 500; /* M3 Label Medium */
    letter-spacing: 0.041em; /* M3 Label Medium (0.5px for 12px) */
    text-transform: none;
    transition: background-color 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
}
.pdf-button:hover {
    background-color: var(--pdf-button-hover-bg);
}
.pdf-button svg {
    width: 0.875rem;
    height: 0.875rem;
}
.calendar-nav-button {
    background-color: var(--calendar-nav-button-bg);
    color: var(--calendar-nav-button-text);
    padding: 0.5rem 0.75rem;
    border-radius: 9999px;
    transition: background-color 0.2s ease-in-out;
    font-size: 0.875rem; /* Ensure icon button text (if any) would match label large */
    font-weight: 500;
    text-transform: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
}
.calendar-nav-button:hover {
    background-color: var(--calendar-nav-button-hover-bg);
}
.calendar-nav-button svg {
    width: 1.25rem;
    height: 1.25rem;
}
body.dark-mode .calendar-nav-button svg {
    color: var(--dm-text-color); /* ensure icons are visible */
}

#toggleRepeatsButton, #toggleZonesButton {
    background-color: var(--toggle-button-bg);
    color: var(--toggle-button-text);
    border: 2px solid var(--toggle-button-border);
    padding: 0.4rem 0.9rem;
    font-size: 0.875rem; /* 14px - M3 Label Large */
    font-weight: 600; /* M3 Label Large */
    letter-spacing: 0.00625em; /* M3 Label Large */
    text-transform: none;
    border-radius: 12px; /* M3 Medium button */
    transition: background-color 0.2s, border-color 0.2s;
}
#toggleRepeatsButton:hover, #toggleZonesButton:hover {
    background-color: var(--toggle-button-hover-bg);
    border-color: var(--toggle-button-hover-border);
}

/* Today's Training Card - Activity Text Color Classes */
.activity-text-easy, .pace-text-easy { color: var(--activity-text-easy) !important; }
.activity-text-recovery, .pace-text-recovery { color: var(--activity-text-recovery) !important; }
.activity-text-base, .pace-text-base { color: var(--activity-text-base) !important; }
.activity-text-tempo, .pace-text-tempo { color: var(--activity-text-tempo) !important; }
.activity-text-interval, .activity-text-intervals, .pace-text-interval, .pace-text-intervals { color: var(--activity-text-interval) !important; }
.activity-text-fartlek, .pace-text-fartlek { color: var(--activity-text-fartlek) !important; }
.activity-text-str, .activity-text-hills, .pace-text-str, .pace-text-hills { color: var(--activity-text-str-hills) !important; }
.activity-text-rest, .pace-text-rest { color: var(--activity-text-rest) !important; }
.activity-text-zone, .activity-text-race, .pace-text-zone, .pace-text-race { color: var(--activity-text-zone-race) !important; }
.activity-text-double, .pace-text-double { color: var(--activity-text-double) !important; }
.activity-text-mobility, .pace-text-mobility { color: var(--activity-text-mobility) !important; }

body.dark-mode .activity-text-easy, body.dark-mode .pace-text-easy { color: #4ade80 !important; } /* green-400 */
body.dark-mode .activity-text-recovery, body.dark-mode .pace-text-recovery { color: #7dd3fc !important; } /* sky-300 */
body.dark-mode .activity-text-base, body.dark-mode .pace-text-base { color: #93c5fd !important; } /* blue-300 */
body.dark-mode .activity-text-tempo, body.dark-mode .pace-text-tempo { color: #fdba74 !important; } /* orange-300 */
body.dark-mode .activity-text-interval, body.dark-mode .activity-text-intervals, body.dark-mode .pace-text-interval, body.dark-mode .pace-text-intervals { color: #fca5a5 !important; } /* red-300 */
body.dark-mode .activity-text-fartlek, body.dark-mode .pace-text-fartlek { color: #f9a8d4 !important; } /* pink-300 */
body.dark-mode .activity-text-str, body.dark-mode .activity-text-hills, body.dark-mode .pace-text-str, body.dark-mode .pace-text-hills { color: #d4af80 !important; } /* custom brown-ish */
body.dark-mode .activity-text-rest, body.dark-mode .pace-text-rest { color: #9ca3af !important; } /* gray-400 */
body.dark-mode .activity-text-zone, body.dark-mode .activity-text-race, body.dark-mode .pace-text-zone, body.dark-mode .pace-text-race { color: #c4b5fd !important; } /* violet-300 */
body.dark-mode .activity-text-double, body.dark-mode .pace-text-double { color: #fcd34d !important; } /* amber-300 */
body.dark-mode .activity-text-mobility, body.dark-mode .pace-text-mobility { color: #d4af80 !important; } /* custom brown-ish */


.highlight-zone-pace {
    background-color: var(--highlight-zone-pace-bg) !important;
    color: var(--highlight-zone-pace-text) !important;
    font-weight: bold !important;
}

/* --- Companion App Styles --- */
.companion-nav-button {
    padding: 0.625rem 1.5rem; /* 10px 24px */
    border-radius: 9999px; /* Pill shape */
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    font-size: 0.875rem; /* 14px - M3 Label Large */
    font-weight: 600; /* M3 Label Large */
    letter-spacing: 0.00625em; /* M3 Label Large */
    text-transform: none;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    cursor: pointer;
}
.companion-nav-button:hover:not(.active) {
    background-color: var(--companion-nav-button-hover-bg);
    color: var(--companion-nav-button-hover-text);
}
.companion-nav-button.active.drills { background-color: var(--companion-nav-button-active-drills-bg); color: var(--companion-nav-button-active-drills-text); }
.companion-nav-button.active.mobility { background-color: var(--companion-nav-button-active-mobility-bg); color: var(--companion-nav-button-active-mobility-text); }
.companion-nav-button.active.strength { background-color: var(--companion-nav-button-active-strength-bg); color: var(--companion-nav-button-active-strength-text); }

.exercise-card {
    background-color: var(--exercise-card-bg);
    border-radius: 12px; /* M3 Card */
    padding: 1rem;
    box-shadow: var(--exercise-card-shadow);
    transition: transform 0.2s, box-shadow 0.2s;
}
.exercise-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--exercise-card-hover-shadow);
}
.exercise-card h3 {
    font-size: 1.125rem; /* 18px - M3 Title Medium (could be 16px) */
    font-weight: 600; /* M3 Title Medium (often 500) */
    letter-spacing: 0.009375em; /* M3 Title Medium */
    line-height: 1.5rem; /* 24px */
    margin-bottom: 0.25rem;
    color: var(--text-color); /* Ensure heading text color is updated */
}
.exercise-card .details {
    font-weight: 500;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    display: inline-block;
}
.details-drills { background-color: var(--details-drills-bg); color: var(--details-drills-text); }
.details-mobility { background-color: var(--details-mobility-bg); color: var(--details-mobility-text); }
.details-strength { background-color: var(--details-strength-bg); color: var(--details-strength-text); }
.video-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--video-link-text);
    font-weight: 500;
    text-decoration: none;
    transition: color 0.2s;
}
.video-link:hover {
    color: var(--video-link-hover-text);
}
.video-link svg { fill: currentColor; } /* Ensure SVG icon color matches link */

.updates-card { /* Used on overview page */
    border-left-width: 4px;
    border-left-color: var(--updates-card-border-l);
}
body.dark-mode .updates-card {
    border-left-color: var(--dm-updates-modal-header-gradient-start); /* Match modal style */
}


/* --- Updates Modal --- */
#updates-modal .updates-modal-content-wrapper {
    background-color: var(--m3-surface-3-light); /* Dialogs are more elevated */
    border-radius: 28px; /* M3 Dialog shape */
    box-shadow: var(--updates-modal-shadow);
    width: 100%;
    max-width: 36rem; /* 576px */
    padding: 1.5rem;
    position: relative;
    max-height: 80vh; /* Make it scrollable if content is long */
    overflow-y: auto;
}
#updates-modal .updates-modal-content-wrapper h2 {
    background: linear-gradient(to right, var(--updates-modal-header-gradient-start), var(--updates-modal-header-gradient-end));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    /* Assuming this H2 maps to M3 Headline Small / Title Large */
    font-size: 1.5rem; /* 24px - M3 Headline Small */
    font-weight: 500; /* M3 Headline Small */
    letter-spacing: 0;
    line-height: 2rem; /* 32px */
}
#close-updates-modal-btn {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    color: var(--updates-modal-close-text);
    background-color: var(--updates-modal-close-bg);
    border-radius: 9999px;
    width: 2rem;
    height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease-in-out;
    z-index: 10;
}
#close-updates-modal-btn:hover {
    color: var(--updates-modal-close-hover-text);
    background-color: var(--updates-modal-close-hover-bg);
    transform: rotate(90deg);
}
#updates-modal .updates-card { /* Used inside modal */
    border-left-width: 4px;
    border-left-color: var(--updates-modal-card-border-l);
    background-color: var(--updates-modal-card-bg);
    padding: 1rem;
    border-radius: 0.5rem;
}
body.dark-mode #updates-modal .updates-card {
    border-left-color: var(--dm-updates-modal-header-gradient-start);
    background-color: var(--dm-updates-modal-card-bg); /* this should be darker than modal content wrapper */
}
body.dark-mode #updates-modal .updates-modal-content-wrapper {
     background-color: var(--dm-main-container-bg); /* Slightly lighter than card bg */
}


@page {
    margin: 15mm;
}

@media print {
    body {
        background-color: var(--print-body-bg) !important;
        color: var(--print-text) !important; /* Ensure body text defaults to print colors */
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        min-width: 0 !important; /* Allow body to shrink to content */
    }

    body * {
        display: none !important;
        visibility: hidden !important;
        margin: 0 !important;
        padding: 0 !important;
        background-color: transparent !important; /* Avoid unexpected backgrounds */
        color: inherit !important; /* Inherit print text color */
        border-color: var(--print-text) !important; /* Make borders visible if needed */
        box-shadow: none !important;
    }

    #print-section-container {
        display: block !important;
        visibility: visible !important;
        position: absolute !important;
        left: 0 !important;
        top: 0 !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important; /* Page margins handled by @page */
        background-color: var(--print-body-bg) !important;
    }

    #print-section-container .currently-printing-this-week {
        display: block !important;
        visibility: visible !important;
        width: 100% !important; /* Takes width from @page margins */
        margin: 0 auto !important;
        padding: 0 !important; /* Adjusted as @page handles margins/padding for overall page */
        box-sizing: border-box !important;
        background-color: var(--print-body-bg) !important;
        font-size: 10pt !important;
        color: var(--print-text) !important;
        border: none !important; /* Ensure no outer border */
        box-shadow: none !important;
    }

    /* Make all children of currently-printing-this-week visible and display block by default */
    #print-section-container .currently-printing-this-week * {
        display: block !important; /* Overridden by more specific table rules below */
        visibility: visible !important;
        background-color: transparent !important; /* Ensure inner elements don't have odd backgrounds */
        color: var(--print-text) !important; /* Ensure all text is printable */
        box-shadow: none !important;
        border-color: var(--print-text) !important; /* Default border color for printable items */
    }

    /* Revert display for table elements to ensure they render as tables */
    #print-section-container .schedule-table,
    #print-section-container .schedule-table caption,
    #print-section-container .schedule-table tbody,
    #print-section-container .schedule-table tfoot,
    #print-section-container .schedule-table thead,
    #print-section-container .schedule-table tr,
    #print-section-container .schedule-table th,
    #print-section-container .schedule-table td {
        display: revert !important;
    }

    #print-section-container .currently-printing-this-week h4,
    #print-section-container .currently-printing-this-week p,
    #print-section-container .currently-printing-this-week strong,
    #print-section-container .currently-printing-this-week .schedule-table th,
    #print-section-container .currently-printing-this-week .schedule-table td,
    #print-section-container .currently-printing-this-week .text-xs,
    #print-section-container .currently-printing-this-week .text-sm,
    #print-section-container .currently-printing-this-week .text-lg,
    #print-section-container .currently-printing-this-week .font-bold,
    #print-section-container .currently-printing-this-week .font-medium,
    #print-section-container .currently-printing-this-week .font-semibold {
        color: var(--print-text) !important;
        background-color: transparent !important; /* Ensure no colored backgrounds from Tailwind */
    }

    #print-section-container .currently-printing-this-week .schedule-table {
        width: 100% !important;
        border-collapse: collapse !important;
        margin-top: 0.5rem !important;
        page-break-inside: avoid !important;
    }
    #print-section-container .currently-printing-this-week .schedule-table th,
    #print-section-container .currently-printing-this-week .schedule-table td {
        border: 1px solid var(--print-table-border) !important;
        padding: 0.3rem 0.4rem !important; /* Slightly reduced padding for print */
        text-align: left !important;
    }
    #print-section-container .currently-printing-this-week .schedule-table th {
        font-weight: bold !important;
        background-color: var(--print-table-th-bg) !important; /* Light gray for header */
    }
    #print-section-container .currently-printing-this-week .schedule-table tr {
        page-break-inside: avoid !important;
        page-break-after: auto !important;
    }
    #print-section-container .currently-printing-this-week .schedule-table td:first-child {
        font-weight: bold !important;
    }

    #print-section-container .currently-printing-this-week p.italic {
        margin-top: 0.75rem !important;
        padding: 0.5rem !important;
        border: 1px solid var(--print-notes-border) !important;
        border-radius: 0.25rem !important;
    }

    /* Handle links for printing */
    #print-section-container .currently-printing-this-week a {
        color: var(--print-text) !important;
        text-decoration: none !important;
    }
    /* Optionally show href for links, uncomment if desired
    #print-section-container .currently-printing-this-week a[href]:after {
        content: " (" attr(href) ")";
        font-size: 0.9em;
        color: #555 !important;
    }
    */

    /* Ensure specific Tailwind text colors used in printable content are black for print */
    #print-section-container .currently-printing-this-week .text-stone-800,
    #print-section-container .currently-printing-this-week .text-stone-700,
    #print-section-container .currently-printing-this-week .text-stone-600,
    #print-section-container .currently-printing-this-week .text-sky-700,
    #print-section-container .currently-printing-this-week .text-green-700,
    #print-section-container .currently-printing-this-week .text-amber-500 {
        color: var(--print-text) !important;
    }
    /* Ensure specific Tailwind background colors used in printable content are transparent */
    #print-section-container .currently-printing-this-week .bg-stone-100,
    #print-section-container .currently-printing-this-week .bg-red-50,
    #print-section-container .currently-printing-this-week .bg-orange-50,
    #print-section-container .currently-printing-this-week .bg-amber-50,
    #print-section-container .currently-printing-this-week .bg-yellow-50,
    #print-section-container .currently-printing-this-week .bg-lime-50,
    #print-section-container .currently-printing-this-week .bg-green-50,
    #print-section-container .currently-printing-this-week .bg-emerald-50 {
        background-color: transparent !important;
    }


    .no-print,
    .pdf-button,
    .nav-button,
    body > header,
    body > nav,
    #login-container,
    #main-app-wrapper > header, /* This will hide the dark mode toggle in print */
    #main-app-wrapper > nav,
    #calendar-controls,
    .calendar-grid,
    #this-weeks-plan-card,
    #mileage-chart-modal,
    #updates-modal,
    #training-plan-content .chart-container,
    .chart-container p,
    #calendar-selected-day-header,
    #raceElevationChartContainer,
    #phase-navigation,
    #phase-details > .content-card > h3:not(.phase-title-style),
    #phase-details > .content-card > hr,
    #phase-details > .content-card > p,
    #phase-details > .content-card > h4:not(:first-child),
    #phase-details .week-button,
    #training-plan-content > div:first-child:not(#week-details-container)
        {
        display: none !important;
        visibility: hidden !important;
    }
}
.today-pace-table {
    width: 100%;
    margin-top: 0.5rem;
    border-collapse: collapse;
    font-size: 0.75rem; /* 12px - M3 Body Small */
    line-height: 1.33; /* 16px */
    letter-spacing: 0.033em; /* 0.4px */
}
.today-pace-table th, .today-pace-table td {
    border: 1px solid var(--today-pace-table-border);
    padding: 0.3rem 0.5rem;
    text-align: left;
}
.today-pace-table th {
    background-color: var(--today-pace-table-th-bg);
    font-weight: 500; /* M3 Label Small/Medium */
    color: var(--today-pace-table-th-text);
    font-size: 0.75rem; /* M3 Label Small or Body Small */
}
.today-pace-table th.header-zone { color: var(--today-pace-table-th-text); } /* Already covered by general th */
.today-pace-table th.header-pace { color: var(--today-pace-table-th-text); } /* Already covered by general th */
.today-pace-table th.header-low { color: var(--today-pace-table-header-low); }
.today-pace-table th.header-average { color: var(--today-pace-table-header-average); }
.today-pace-table th.header-high { color: var(--today-pace-table-header-high); }

.today-pace-table td {
    font-weight: 600;
    color: var(--text-color); /* Ensure td text color is updated */
}
.today-pace-table td:first-child {
    font-weight: 500;
}

.todays-activity-box {
    padding: 0.75rem;
    border-radius: 0.375rem;
    margin-top: 0.5rem;
    border: 1px solid var(--todays-activity-box-border);
    background-color: var(--todays-activity-box-bg);
}
.todays-activity-box p strong.activity-text {
    font-weight: 600;
    font-size: 1.25rem;
    line-height: 1.6;
    color: var(--todays-activity-text-default); /* Default color, will be overridden by specific classes below */
}
.todays-weekly-notes-box {
    border: 1px solid var(--todays-weekly-notes-box-border);
    background-color: var(--todays-weekly-notes-box-bg);
    padding: 0.75rem;
    border-radius: 0.375rem;
    margin-top: 0.5rem;
}
body.dark-mode .todays-weekly-notes-box p, body.dark-mode .todays-weekly-notes-box li {
    color: var(--dm-text-color); /* Ensure text inside notes is readable */
}


@media (max-width: 639px) {
    .calendar-day {
        min-height: 40px;
        padding: 0.25rem;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }
    .calendar-day .day-number {
        font-size: 0.875rem;
        margin-bottom: 0;
    }
    .calendar-day .activity-thumbnail {
        display: none;
    }
    .calendar-day.activity-thumbnail-fartlek { background-color: var(--mobile-calendar-day-fartlek-bg); color: var(--mobile-calendar-day-fartlek-text) !important; }
    .calendar-day.activity-thumbnail-easy-green { background-color: var(--mobile-calendar-day-easy-green-bg); color: var(--mobile-calendar-day-easy-green-text) !important; }
    .calendar-day.activity-thumbnail-interval { background-color: var(--mobile-calendar-day-interval-bg); color: var(--mobile-calendar-day-interval-text) !important; }
    .calendar-day.activity-thumbnail-easy { background-color: var(--mobile-calendar-day-easy-bg); color: var(--mobile-calendar-day-easy-text) !important; }
    .calendar-day.activity-thumbnail-tempo { background-color: var(--mobile-calendar-day-tempo-bg); color: var(--mobile-calendar-day-tempo-text) !important; }
    .calendar-day.activity-thumbnail-long { background-color: var(--mobile-calendar-day-long-bg); color: var(--mobile-calendar-day-long-text) !important; }
    .calendar-day.activity-thumbnail-race { background-color: var(--mobile-calendar-day-race-bg); color: var(--mobile-calendar-day-race-text) !important; }
    .calendar-day.activity-thumbnail-rest { background-color: var(--mobile-calendar-day-rest-bg); color: var(--mobile-calendar-day-rest-text) !important; }
    .calendar-day.activity-thumbnail-default { background-color: var(--mobile-calendar-day-default-bg); color: var(--mobile-calendar-day-default-text) !important; }

    .calendar-day.is-today .day-number {
        color: var(--mobile-calendar-day-today-number-text);
    }
    body.dark-mode .calendar-day.is-today .day-number {
        color: var(--dm-mobile-calendar-day-today-number-text);
    }
    .calendar-day.has-activity .day-number {
        mix-blend-mode: difference;
        filter: invert(1) grayscale(1) contrast(100);
    }
    body.dark-mode .calendar-day.has-activity .day-number {
        /* Re-evaluate this for dark mode, might need to remove or adjust for visibility */
        /* mix-blend-mode: unset; filter: unset; /* Option 1: remove effect */
        /* color: var(--dm-text-color); /* Option 2: Ensure contrast */
    }

    /* Reduce base font size on smaller screens for better readability */
    html {
        font-size: 93.75%; /* 15px base if default is 16px. Scales rem units. */
    }

    /* Adjust element sizes for mobile view */
    .css-logo-dna {
        font-size: 2.8rem; /* Reduced from 3.75rem. (15px * 2.8 = 42px) */
        padding: 0.4rem 0.6rem; /* Reduced from 0.5rem 0.75rem */
        margin-bottom: 0.5rem; /* Optionally reduce from 0.75rem */
    }

    h1.main-title { /* Targets main page titles. Tailwind text-3xl is 1.875rem (now ~28px) */
        font-size: 1.75rem; /* Slightly smaller, approx 26.25px now */
        line-height: 1.2;
    }

    #darkModeToggle svg {
        width: 1.25rem; /* 20px (was h-6 w-6 -> 1.5rem -> 22.5px) */
        height: 1.25rem;
    }

    /* Reduce padding for calendar navigation buttons */
    .calendar-nav-button {
        width: 2.25rem; /* Reduced from 2.5rem */
        height: 2.25rem;
    }
    .calendar-nav-button svg {
        width: 1.125rem; /* Reduced from 1.25rem */
        height: 1.125rem;
    }

    /* Adjust spacing for mobile view */
    body {
        padding: 1rem; /* Reduced from p-4 py-8 (which is 1rem horizontal, 2rem vertical) */
    }

    .main-container {
        padding: 1rem; /* Reduced from 1.5rem default */
    }

    /* Headers and Navigations */
    header.mb-8, /* Matches Tailwind mb-8, which is 2rem */
    nav.mb-8 { /* Matches Tailwind mb-8, which is 2rem */
        margin-bottom: 1rem !important; /* Reduced to 1rem */
    }

    /* Specifically target the main app header and nav if they are the ones with mb-8 */
    /* If other headers/navs exist that also use mb-8 but shouldn't be reduced, more specific selectors would be needed */
    #main-app-wrapper > header.mb-8,
    #main-app-wrapper > nav.mb-8 {
         margin-bottom: 1rem !important;
    }


    .nav-button {
        padding: 0.4rem 0.8rem; /* Reduced from 0.6rem 1.1rem */
        font-size: 0.875rem; /* text-sm, if not already scaled by html font-size */
    }

    /* Companion navigation buttons, if they need separate adjustment */
    .companion-nav-button {
        padding: 0.5rem 0.9rem; /* Slightly larger than main nav, adjust as needed */
        font-size: 0.875rem;
    }

    .content-card {
        padding: 0.75rem; /* Reduced from 1rem */
    }

    .schedule-table th,
    .schedule-table td {
        padding: 0.5rem; /* Reduced from 0.75rem */
    }

    /* .today-pace-table th, .today-pace-table td already have small padding (0.3rem 0.5rem), likely okay. */

    /* Adjustments for login screen if needed */
    #login-container header.mb-8 {
        margin-bottom: 1.5rem !important; /* Example: slightly more than others */
    }
    #login-container .space-y-4 > div:not(:first-child) { /* Tailwind space-y-4 is 1rem */
        margin-top: 0.75rem; /* Example: reduce space between elements */
    }
     #login-container .space-y-4 > button:not(:first-child) {
        margin-top: 1rem; /* Keep button spacing reasonable */
    }

    /* Reduce padding for specific modals if they feel too large on mobile */
    #mileage-chart-modal > div {
        padding: 1rem;
    }
    #updates-modal .updates-modal-content-wrapper {
        padding: 1rem;
    }

}

/* Dark mode specific overrides for button icon colors if not handled by Tailwind */
body.dark-mode #darkModeToggle svg {
    stroke: var(--dm-text-color); /* Example: Use light text color for icon stroke */
}

/* Ensure Tailwind's text colors in HTML are overridden if needed */
body.dark-mode .text-stone-800 { color: var(--dm-text-color) !important; }
body.dark-mode .text-stone-700 { color: var(--dm-text-color) !important; } /* For labels */
body.dark-mode .text-stone-600 { color: #d1d5db !important; } /* gray-300 for subtitles */
body.dark-mode .text-sky-600 { color: #7dd3fc !important; } /* sky-300 for links/highlights */
body.dark-mode .text-sky-700 { color: #38bdf8 !important; } /* sky-400 for stronger highlights */
    body.dark-mode .text-amber-500 { color: #fcd34d !important; } /* amber-300 */
    body.dark-mode .text-green-700 { color: #4ade80 !important; } /* green-400 */
    body.dark-mode .text-violet-700 { color: #a78bfa !important; } /* violet-400 */
    body.dark-mode .text-violet-600 { color: #c4b5fd !important; } /* violet-300 */
    body.dark-mode .text-indigo-700 { color: #a5b4fc !important; } /* indigo-300 */
    body.dark-mode .text-indigo-800 { color: #818cf8 !important; } /* indigo-400 */
    body.dark-mode .text-emerald-600 { color: #6ee7b7 !important; } /* emerald-300 */
    body.dark-mode .text-emerald-700 { color: #34d399 !important; } /* emerald-400 */
    body.dark-mode .text-yellow-500 { color: #fde047 !important; } /* yellow-300 */


/* Ensure Tailwind's background colors in HTML are overridden */
body.dark-mode .bg-sky-600 { background-color: var(--nav-button-active-overview-bg) !important; } /* Or a specific dark mode primary button color */
body.dark-mode .hover\:bg-sky-700:hover { background-color: var(--nav-button-active-overview-hover-bg) !important; }

    /* Dark mode for table row backgrounds (Tailwind bg-color-50 series) */
    body.dark-mode .bg-stone-100 { background-color: #2c3e50 !important; /* Darker slate/blue */ }
    body.dark-mode .bg-red-50 { background-color: #4a1d1d !important; /* Dark red */ }
    body.dark-mode .bg-orange-50 { background-color: #522c15 !important; /* Dark orange */ }
    body.dark-mode .bg-amber-50 { background-color: #543810 !important; /* Dark amber */ }
    body.dark-mode .bg-yellow-50 { background-color: #534a18 !important; /* Dark yellow */ }
    body.dark-mode .bg-lime-50 { background-color: #2f481a !important; /* Dark lime */ }
    body.dark-mode .bg-green-50 { background-color: #1c4b30 !important; /* Dark green */ }
    body.dark-mode .bg-emerald-50 { background-color: #154734 !important; /* Dark emerald */ }
    body.dark-mode .bg-violet-50 { background-color: #2f1e44 !important; /* Dark violet */ }


    /* Ensure text in these specific background rows is light */
    body.dark-mode .bg-red-50 td, body.dark-mode .bg-red-50 strong,
    body.dark-mode .bg-orange-50 td, body.dark-mode .bg-orange-50 strong,
    body.dark-mode .bg-amber-50 td, body.dark-mode .bg-amber-50 strong,
    body.dark-mode .bg-yellow-50 td, body.dark-mode .bg-yellow-50 strong,
    body.dark-mode .bg-lime-50 td, body.dark-mode .bg-lime-50 strong,
    body.dark-mode .bg-green-50 td, body.dark-mode .bg-green-50 strong,
    body.dark-mode .bg-emerald-50 td, body.dark-mode .bg-emerald-50 strong,
    body.dark-mode .bg-violet-50 td, body.dark-mode .bg-violet-50 strong,
    body.dark-mode .bg-stone-100 td, body.dark-mode .bg-stone-100 strong,
    body.dark-mode .bg-stone-100 th { /* For schedule table headers */
        color: var(--m3-on-surface-dark) !important;
    }


/* Override for mileage chart modal background and text */
#mileage-chart-modal > div { /* General styling for the modal content area */
    background-color: var(--m3-surface-3-light);
    color: var(--m3-on-surface-light);
    border-radius: 28px; /* M3 Dialog shape */
    /* Note: p-4, relative, w-full, max-w-3xl are from HTML */
}
body.dark-mode #mileage-chart-modal > div {
    background-color: var(--m3-surface-3-dark); /* Dialogs are more elevated */
    color: var(--m3-on-surface-dark);
    /* border-radius is now globally applied */
}
body.dark-mode #mileage-chart-modal-title {
    color: var(--dm-title-marathon-text); /* Or a more general heading color for dark mode */
}
body.dark-mode #closeMileageChartBtn {
    color: var(--dm-text-color);
}
body.dark-mode #closeMileageChartBtn:hover {
    color: var(--dm-nav-button-hover-text);
}

/* Ensure chart.js legend/axes are visible in dark mode */
body.dark-mode .chart-container {
    /* Chart.js might inject styles directly or use parent color. Add overrides if needed */
}
/* If Chart.js uses parent color for text, this should help */
body.dark-mode #mileageChartModalCanvas, body.dark-mode /* other canvas IDs */ {
    /* Chart.js often sets its own colors. May need JS to update chart options for dark mode */
}

/* Specific text color overrides for today-pace-table if not covered by general text-stone or activity-text */
body.dark-mode .today-pace-table .text-teal-700 { color: #4fd1c5 !important; /* Lighter teal */ }
body.dark-mode .today-pace-table .text-green-600 { color: #68d391 !important; /* Lighter green */ }
body.dark-mode .today-pace-table .text-sky-600 { color: #7fccff !important; /* Lighter sky */ }
body.dark-mode .today-pace-table .text-lime-600 { color: #a8e977 !important; /* Lighter lime */ }
body.dark-mode .today-pace-table .text-amber-500 { color: #fcd34d !important; /* Lighter amber */ }
body.dark-mode .today-pace-table .text-red-600 { color: #fca5a5 !important; /* Lighter red */ }

/* Ensure all text in schedule-table and today-pace-table defaults to --dm-text-color if not specifically styled */
body.dark-mode .schedule-table td,
body.dark-mode .today-pace-table td {
    color: var(--dm-text-color); /* Default for all td cells */
}
/* Override for the bolded day name in schedule table if it was text-stone-800 */
body.dark-mode .schedule-table td.font-bold {
    color: var(--dm-text-color) !important;
}
/* Ensure specific pace zone colors in today's pace table override the default td color */
body.dark-mode .today-pace-table td.text-green-600 { color: #68d391 !important; }
body.dark-mode .today-pace-table td.text-sky-600 { color: #7fccff !important; }
body.dark-mode .today-pace-table td.text-lime-600 { color: #a8e977 !important; }
/* Add other specific zone colors if they exist and are different from the general activity-text overrides */

/* --- Today Card Navigation Arrows --- */
#todayPrevDay,
#todayNextDay {
    /* Tailwind classes p-1, text-sky-700, hover:text-sky-500, disabled:opacity-30 are already applied in JS */
    /* Adding subtle background on hover and ensuring good tap targets */
    border-radius: 0.375rem; /* rounded-md */
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, opacity 0.2s ease-in-out;
}

#todayPrevDay:not(:disabled):hover,
#todayNextDay:not(:disabled):hover {
    background-color: var(--nav-button-hover-bg); /* Using existing variable for hover background */
}

/* Ensure SVG icon color inherits button text color, especially for hover/disabled states */
#todayPrevDay svg,
#todayNextDay svg {
    stroke: currentColor; /* Make SVG color same as button text color */
}

/* Disabled state is largely handled by Tailwind's disabled:opacity-30 */
#todayPrevDay:disabled,
#todayNextDay:disabled {
    cursor: not-allowed;
}

/* Dark mode considerations for arrows if not covered by global text overrides */
body.dark-mode #todayPrevDay:not(:disabled),
body.dark-mode #todayNextDay:not(:disabled) {
    color: var(--dm-title-marathon-text); /* Using sky-400 equivalent for dark mode */
}

body.dark-mode #todayPrevDay:not(:disabled):hover,
body.dark-mode #todayNextDay:not(:disabled):hover {
    background-color: var(--dm-nav-button-hover-bg); /* Dark mode hover background */
    color: var(--dm-nav-button-hover-text);
}

/* The title area for Today card uses: <div class="flex justify-between items-center w-full">
   This should already handle layout well. These CSS rules are mostly for subtle enhancements. */
